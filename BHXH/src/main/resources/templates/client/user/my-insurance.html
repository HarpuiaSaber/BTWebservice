<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="client/common/template">

<head>
	<meta charset="UTF-8" />
	<title>Tra cứu bảo hiểm xã hội</title>
	<script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
</head>

<body>
	<div layout:fragment="content" th:remove="tag">
		<div class="col-md-12">
			<h3 class="title-5 m-b-35">Bảo hiểm xã hội của tôi</h3>
			<div class="table-responsive table-responsive-data2">
				<table class="table table-data2" id="datatable">
					<thead>
						<tr>
							<th>ID</th>
							<th>Mã BHXH</th>
							<th>Tên</th>
							<th>Ngày sinh</th>
							<th>Hình thức đóng</th>
							<th>Địa chỉ</th>
							<th>Ngày đăng ký</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
		<script type="text/javascript" th:inline="javascript">

			var vietnameseUrl = [[@{/vendor/datatables/Vietnamese.json}]];
			var csrf_token = [[${_csrf.token}]];
			var url = [[@{/api/user/getMyInsurance}]];

			var id = "";
			var table;
			$(document).ready(function () {
				table = $('#datatable').DataTable({
					"ordering": false,
					"searching": false,
					"paging": false,
					"destroy": true,
					"info": false,
					"autoWidth": false,
					"processing": true,
					"serverSide": true,
					"ajax": {
						type: "GET",
						url: url,
						dataType: "json",
						contentType: "application/json",
						headers: { 'X-CSRF-TOKEN': csrf_token},
						data: null
					},
					"columns": [
						{ "data": "id", className: "text-right" },
						{ "data": "code", className: "text-right" },
						{ "data": "user.name" },
						{ "data": "user.dob" },
						{ "data": "method" },
						{ "data": "user.location" },
						{ "data": "regDate" },
					],
					"createdRow": function (row, data, index) {
						$(row).addClass('tr-shadow');
					},
					"language": {
						"url": vietnameseUrl,
					},
					"initComplete": function (settings, json) {
					},
					"drawCallback": function () {
						table.rows().every(function () {
							this.nodes().to$().after('<tr class="spacer"></tr>')
						})
					}
				});
			});
		</script>
	</div>
</body>

</html>